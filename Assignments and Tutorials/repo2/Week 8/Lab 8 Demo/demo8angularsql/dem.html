<!DOCTYPE>
<html lang="en" data-ng-app="myApp">
    <head>
        <title>AngularJS with JSON Demo</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <!-- Bootstrap -->
        <link href="frameworks/css/bootstrap.min.css" rel="stylesheet" />
        <!-- HTML5 Shim and Respond.js IE8 support of HTML5
        elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the
        page via file:// -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
            <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->
		 <!--AngularJS -->
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js"></script>
    </head>
	
<body>

<p>Before using this example, please create a database in phpMyAdmin named 'zekkou' and a table name 'kyo'</p>
<p>Insert data in the table called id (auto increment,INT)..food_name and origin_name. Type varchar, length 24. </p>
<p>Run this example in localhost server </p>

		<div data-ng-controller="postCtrl" data-ng-init="updatedata()">
		   <form>
		   <p>Food name: </p>
		   <input type ="text" data-ng-model="foodModel"/>
		   <p>Food origin: </p>
		   <input type ="text" data-ng-model="originModel"/>

		<input type ="button" value="submit" data-ng-click="insertfood()"/>
		<input type ="button" value ="Update View" data-ng-click="updatedata()"/>
		   </form>
		   
		   
		
		

		<script>
		var app = angular.module('myApp', []);

		//For inserting data into SQL
		app.controller('postCtrl',['$scope','$http',function($scope, $http) {
				   $scope.insertfood=function(){
					  var request = $http({
							method: "post",
							url: "phpinsert.php",
							data: {
								food: $scope.foodModel,
								origin: $scope.originModel,
							},
							headers: { 'Content-Type': 'application/x-www-form-urlencoded' }
					});
					
				   }
				   
				   $scope.updatedata =function(){
				   var requestlist = $http({
											method: "get",
											url:"show.php"
										}).then(function successCallback (response){
											$scope.foods = response.data;
										});
				   }
		  }]);

		</script>
		<table class ="table table-bordered">
			<tr>
				<th> Food ID </th>
				<th>Food Name </th>
				<th>Where it from? </th>
			</tr>
			<tr data-ng-repeat ='food in foods'>
				<td>{{food.id}}</td>
				<td>{{food.food_name}}</td>
				<td>{{food.origin_name}}</td>
			</tr>
		
		
		</div>




		<!-- jQuery â€“ required for Bootstrap's JavaScript plugins) -->
        <script src="frameworks/js/jquery.min.js"></script><noscript></noscript>
        <!-- All Bootstrap plug-ins file -->
        <script src="frameworks/js/bootstrap.min.js"></script><noscript></noscript>
		
       
</body>

</html> 